# 설치 필요 시 (주석 해제)
# !pip install transformers datasets

import pandas as pd
from sklearn.model_selection import train_test_split
from transformers import BertTokenizer, BertForSequenceClassification, Trainer, TrainingArguments, EarlyStoppingCallback, TrainerCallback
import torch
from torch.utils.data import Dataset
import numpy as np
from datasets import load_metric
from sklearn.metrics import confusion_matrix, classification_report

# 1. 9개 라벨 정의 및 예시 데이터 구성
label_map = {
    0: "초상권 침해",
    1: "동의 없는 개인정보 수집",
    2: "목적 외 이용",
    3: "제3자 무단 제공",
    4: "CCTV 과잉촬영",
    5: "정보 유출",
    6: "파기 미이행",
    7: "계정/비밀번호 관련 문제",
    8: "개인정보 열람·정정 요구 거부"
}

data = [
    # 0: 초상권 침해

    ("회사 홈페이지에 제 사진이 무단으로 게재됐어요", 0),
    ("행사 중 찍힌 제 얼굴 사진이 광고에 사용됐습니다", 0),
    ("허락 없이 사진이 SNS에 올려졌어요", 0),
    ("촬영 동의 없이 뉴스에 얼굴이 나왔어요", 0),
    ("상사 몰래 촬영된 제 사진이 전사 메일로 배포됐습니다", 0),
    ("카페에서 누군가 제 사진을 찍어 올렸어요", 0),
    ("길거리 인터뷰 후 초상권 동의 없이 방송에 나왔어요", 0),
    ("포스터에 제 얼굴이 실렸는데 아무 동의한 적 없어요", 0),
    ("제 사진이 블로그에 무단으로 올라와 있었습니다", 0),
    ("친구가 동의 없이 사진을 단체방에 공유했어요", 0),
    ("강의 중 찍힌 제 모습이 강의 홍보 영상에 나왔어요", 0),
    ("연예인도 아닌데 제 얼굴이 온라인 기사에 나왔어요", 0),
    ("모임 사진에서 제 얼굴만 클로즈업해서 게시했어요", 0),
    ("몰래 찍은 사진이 인스타에 태그되어 있었어요", 0),
    ("지하철에서 누군가 몰래 사진을 찍었습니다", 0),
    ("운동 중 찍힌 영상이 동의 없이 유튜브에 올라갔어요", 0),
    ("회사 행사 사진이 제 얼굴을 강조해서 써요", 0),
    ("강제 촬영 후 삭제 요청을 무시했어요", 0),
    ("사진 촬영 거절했는데 끝까지 찍었어요", 0),
    ("모임 리더가 제 사진을 홍보용으로 써버렸어요", 0),
    ("사진 사용 동의서를 작성하지 않았는데도 사용됐어요", 0),
    ("내 얼굴이 광고 배너에 무단으로 쓰였어요", 0),
    ("지인들이 동의 없이 제 사진을 퍼트렸어요", 0),
    ("행사장에서 찍은 사진이 제 허락 없이 공개됐어요", 0),
    ("언론사가 동의 없이 내 사진을 기사에 올렸어요", 0),
    ("인터넷에 올린 사진이 무단으로 편집돼 사용됐어요", 0),
    ("내 사진이 가짜 뉴스에 사용되고 있어요", 0),
    ("친구가 몰래 찍은 사진을 SNS에 올렸어요", 0),
    ("초상권 침해 신고했는데 처리가 안 되고 있어요", 0),
    ("사진 삭제 요청했는데 사이트에서 안 지워줘요", 0),
    ("제 얼굴이 허락 없이 카메라 광고에 노출됐어요", 0),
    ("동의 없이 드론 영상에 제가 찍혔습니다", 0),
    ("공개된 단체 사진에서 제 얼굴만 강조되어 있어요", 0),
    ("지인 SNS에 제 사진이 태그되어 올라왔어요", 0),
    ("회사 인트라넷에 얼굴 사진이 올라간 걸 몰랐어요", 0),
    ("프로필 사진이 동의 없이 회사 포스터에 사용됐습니다", 0),
    ("비공개였던 사진이 동의 없이 공개로 전환됐어요", 0),
    ("내 허락 없이 출근 모습이 기사에 실렸어요", 0),
    ("제 사진이 뉴스 기사 대표 이미지로 사용됐어요", 0),
    ("촬영 거절 의사를 밝혔는데 강제로 찍혔어요", 0),
    ("인터뷰에 응한 적 없는데 제 얼굴이 뉴스 영상에 나왔어요", 0),
    ("행사 무대 관객 사진에 제 얼굴이 그대로 노출됐어요", 0),
    ("거리 캠페인 영상에 동의 없이 얼굴이 포함됐습니다", 0),
    ("인터뷰 현장에서 몰래 촬영당했습니다", 0),
    ("지하철 플랫폼 CCTV에 제 얼굴이 클로즈업되어 방송됐어요", 0),
    ("뉴스 보도자료에 제 이미지가 무단 삽입됐습니다", 0),
    ("타인의 유튜브 영상에 저도 모르게 등장했어요", 0),
    ("내 사진이 제품 리뷰에 사용되고 있어요", 0),
    ("기념 사진이라며 찍더니 광고에 쓰였어요", 0),
    ("포털 사이트 이미지 검색에 제 얼굴이 떠요", 0),
    ("사진 사용 동의를 요청받은 적이 없어요", 0),
    ("강의 자료에 제 얼굴이 무단으로 포함되어 있었어요", 0),
    ("전시회 사진에 제가 찍혔는데 게시 전에 연락이 없었습니다", 0),
    ("내 동의 없이 친구가 찍은 영상을 유튜브에 올렸어요", 0),
    ("뉴스 기사 캡처에 제 얼굴이 그대로 나왔어요", 0),
    ("SNS에 올라온 단체 사진에 제 얼굴이 모자이크 처리되지 않았어요", 0),
    ("회식 사진이 사내 공지에 무단으로 사용됐어요", 0),
    ("촬영 거부했는데 사진이 계속 남아 있었습니다", 0),
    ("영상 편집 과정에서 제 얼굴이 모자이크되지 않았어요", 0),
    ("외부 인턴 채용 설명회 영상에 제 얼굴이 동의 없이 사용됐습니다", 0),
    ("제가 등장한 사진이 외부 보도자료에 사용된 걸 보고 알았습니다", 0),

# 1: 동의 없는 개인정보 수집

    ("회원가입 시 동의 없이 주민번호를 수집했어요", 1),
    ("동의 없이 위치정보를 가져갔어요", 1),
    ("앱을 설치했더니 정보 수집 동의가 자동으로 되어 있었어요", 1),
    ("이메일 수집에 대해 고지받지 못했어요", 1),
    ("문의했더니 제 개인정보를 이미 가지고 있었어요", 1),
    ("이용 동의서 없이 개인정보를 입력해야 했어요", 1),
    ("로그인할 때 동의 받지 않고 추가 정보를 요구해요", 1),
    ("앱이 몰래 마이크 권한을 가져갔어요", 1),
    ("고객센터에서 이름과 주소를 자동 저장해요", 1),
    ("신청서에 불필요한 정보까지 요구해요", 1),
    ("광고 클릭했더니 자동으로 정보가 넘어갔어요", 1),
    ("카페 회원가입에 생년월일을 무조건 입력해야 해요", 1),
    ("비밀번호 없이 제 계정 정보를 볼 수 있었어요", 1),
    ("설문조사에 과도한 개인정보 입력을 요구해요", 1),
    ("앱 설치 시 약관 동의 전에 위치정보가 수집되었어요", 1),
    ("웹사이트가 자동으로 제 정보를 긁어갔어요", 1),
    ("전화 상담 중 제 정보를 기록하는 것 같아요", 1),
    ("블로그 댓글에 이메일 입력이 강제돼요", 1),
    ("카카오 연동 시 과도한 정보가 수집돼요", 1),
    ("동의 없이 통화내용을 수집한 것 같아요", 1),
    ("동의 없이 주소록을 가져갔어요", 1),
    ("어플이 카메라 권한을 몰래 수집해요", 1),
    ("개인정보 수집 관련 고지를 받지 못했어요", 1),
    ("동의 없이 음성 녹음이 되고 있어요", 1),
    ("앱 설치 후 알림 권한이 자동으로 설정됐어요", 1),
    ("가입 시 개인정보 수집 동의서가 없었어요", 1),
    ("내 정보가 수집되는지 알 수가 없어요", 1),
    ("어느 순간 위치 서비스가 켜져 있었어요", 1),
    ("동의 절차 없이 광고 수신 동의가 되어 있어요", 1),
    ("이용 약관을 읽기도 전에 정보 수집이 시작됐어요", 1),
    ("홈페이지 방문만 했는데 개인정보가 저장됐어요", 1),
    ("개인정보 입력 창에 별도의 고지가 없었어요", 1),
    ("상담 중 자동으로 제 정보를 수집하더라고요", 1),
    ("인터넷 접속만 했는데 제 정보가 넘어갔어요", 1),
    ("정보 제공에 대한 안내 없이 가입 절차가 진행됐어요", 1),
    ("내 의사와 관계없이 카메라 접근 권한이 설정됐어요", 1),
    ("이벤트 참여만 했는데 개인정보가 수집됐습니다", 1),
    ("광고를 클릭했더니 제 이름과 번호가 입력됐어요", 1),
    ("회원 가입 시 정보 수집 목적이 불분명했어요", 1),
    ("설치도 안 했던 앱이 제 연락처 정보를 가져간 것 같아요", 1),
    ("홈페이지 접속만 했는데 개인정보가 수집된 것 같아요", 1),
    ("로그인 없이도 내 정보가 수집되고 있었습니다", 1),
    ("쿠키에 의해 내 브라우징 정보가 수집됐어요", 1),
    ("설정에서 차단했는데 여전히 정보가 수집돼요", 1),
    ("별도 고지 없이 생체 정보가 수집됐습니다", 1),
    ("화면 녹화를 통해 정보가 수집된 정황이 있어요", 1),
    ("광고 배너를 클릭했더니 정보가 전송됐습니다", 1),
    ("위치 정보 접근 권한을 거부했는데도 추적돼요", 1),
    ("이벤트 응모에 불필요한 정보까지 기재하게 해요", 1),
    ("연락처 접근 요청이 없었는데도 내 정보가 저장됐어요", 1),
    ("회원가입 전에 주민번호 입력을 강요받았어요", 1),
    ("설치한 앱이 몰래 제 통화 목록을 수집하고 있었어요", 1),
    ("동의 절차 없이 기기 정보가 자동 전송됐어요", 1),
    ("방문만 했는데 브라우저에서 제 정보를 수집했어요", 1),
    ("이벤트 참여 시 개인 정보를 선택 없이 입력하게 했어요", 1),
    ("고지 없이 생체인식 정보를 수집한 걸 나중에 알았어요", 1),
    ("웹사이트가 방문 기록과 클릭 정보를 자동으로 모으고 있었어요", 1),
    ("고객 상담 중에 동의 없이 녹음되었어요", 1),
    ("설문 참여 중 민감한 정보를 요구받았어요", 1),
    ("동의 없이 백그라운드에서 카메라 권한을 사용하고 있었어요", 1),

# 2: 목적 외 이용

    ("마케팅에 내 정보를 사용하는 것 같아요", 2),
    ("이벤트 참여했더니 스팸이 오고 있어요", 2),
    ("약관에는 없던 용도로 제 정보를 사용하고 있어요", 2),
    ("본래 목적과 무관한 광고에 제 정보가 쓰였습니다", 2),
    ("설문조사 참여 후 광고성 연락이 와요", 2),
    ("비회원 주문했는데 연락이 계속 옵니다", 2),
    ("문의만 했는데 광고 문자가 와요", 2),
    ("이벤트 신청 정보가 광고에 활용됐어요", 2),
    ("연락처를 마케팅에 쓴다고 들은 적 없어요", 2),
    ("목적을 설명하지 않고 정보를 수집했어요", 2),
    ("의료 정보가 보험 상품 추천에 사용됐습니다", 2),
    ("물품 구매 시 수집한 정보를 다른 용도로 사용 중이에요", 2),
    ("문의했던 업체 외에 다른 데서 전화가 왔어요", 2),
    ("내 번호를 다른 목적에 활용 중인 것 같아요", 2),
    ("체험단 신청 후 스팸이 계속 옵니다", 2),
    ("내 동의 없이 다른 홍보에 이름이 사용됐어요", 2),
    ("내 정보가 타사 분석에 쓰였어요", 2),
    ("단순 문의였는데 정보가 재사용된 느낌이에요", 2),
    ("내 주소가 광고 배달에 쓰이고 있어요", 2),
    ("방문기록을 마케팅에 쓴다고 적혀 있었나요?", 2),
    ("고객 상담 기록이 외부에 공유되고 있어요", 2),
    ("회원 정보가 다른 부서에 넘어갔어요", 2),
    ("내 동의 없이 프로모션에 활용됐어요", 2),
    ("서비스 이용 기록이 광고에 쓰였어요", 2),
    ("광고 목적 정보 수집에 대해 알지 못했어요", 2),
    ("개인정보가 목적과 다르게 활용되고 있어요", 2),
    ("배송 주소가 마케팅에 사용되고 있어요", 2),
    ("비회원 정보가 광고 리스트에 포함됐어요", 2),
    ("개인 정보가 무단 활용되는 것 같아요", 2),
    ("내 동의 없이 다른 목적으로 이용되고 있어요", 2),
    ("처음에는 서비스 제공 목적이라더니 광고에 쓰였어요", 2),
    ("후기 작성만 했는데 연락이 와서 놀랐어요", 2),
    ("약관에는 없던 방식으로 제 정보가 사용됐어요", 2),
    ("문의사항 접수 후에 마케팅 메일이 오기 시작했어요", 2),
    ("내 정보가 예상치 못한 채널에서 쓰이고 있어요", 2),
    ("참여했던 설문 내용이 광고로 이어졌어요", 2),
    ("앱 이용기록이 분석에 사용됐다는 통보를 받았어요", 2),
    ("서비스 리뷰를 남겼더니 타사 광고에 활용됐어요", 2),
    ("이용 목적 외로 내 정보를 공유했다는 사실을 알게 됐어요", 2),
    ("내 이름이 광고성 콘텐츠에 등장했어요", 2),
    ("고객 만족도 조사라고 하더니 이후에 계속 홍보 문자가 옵니다", 2),
    ("문의했던 내용이 전혀 다른 서비스에 활용됐어요", 2),
    ("상담 후 광고 전화가 계속 옵니다", 2),
    ("한 번만 쓰겠다던 정보가 계속 이용되고 있어요", 2),
    ("내 정보가 AI 학습용으로 쓰였다고 해요", 2),
    ("쇼핑몰 가입 정보가 보험사에 이용됐습니다", 2),
    ("이용 목적을 넘어서 제 정보가 확장 사용됐어요", 2),
    ("내 정보가 통계 자료로 쓰였다는 걸 몰랐어요", 2),
    ("문의만 했는데 명함 등록에 활용됐어요", 2),
    ("이용약관에 없던 목적으로 정보가 사용됐어요", 2),
    ("마케팅 외의 용도로 정보가 전송됐어요", 2),
    ("제품 후기 남긴 이후 스팸 연락이 시작됐어요", 2),
    ("병원 정보가 보험 회사에 전달된 정황이 있어요", 2),
    ("상담 이력으로 타사 마케팅이 진행됐습니다", 2),
    ("택배 수령 주소가 다른 업체 광고에 활용됐어요", 2),
    ("의류 구매 정보가 제휴 업체 마케팅에 사용됐어요", 2),
    ("내 정보가 이벤트 홍보용으로 재활용됐어요", 2),
    ("회원가입 시 명시된 목적 외로 정보가 사용된 것 같아요", 2),
    ("내 계정 활동 정보가 추천 시스템에 활용되고 있었어요", 2),
    ("기존 상담 내용을 기반으로 다른 제품을 제안받았어요", 2),
    ("내가 남긴 리뷰가 타사 광고 페이지에 노출됐어요", 2),

# 3: 제3자 무단 제공

    ("내 개인정보가 제3자에게 동의 없이 넘어간 것 같아요", 3),
    ("다른 업체에서 내 정보를 활용하고 있어요", 3),
    ("서비스 가입 후 타사에서 연락이 옵니다", 3),
    ("내 정보가 광고 회사에 전달된 것 같습니다", 3),
    ("어느 순간 모르는 곳에서 내 정보가 사용됐어요", 3),
    ("동의하지 않았는데 제휴사에서 문자가 왔어요", 3),
    ("개인정보가 협력업체에 넘겨졌습니다", 3),
    ("타사에서 내 이메일을 알고 있더라고요", 3),
    ("제3자에게 개인정보를 제공한다고 들은 적이 없어요", 3),
    ("갑자기 여러 쇼핑몰에서 내 정보를 사용하고 있어요", 3),
    ("동의 없이 다른 기관에 정보가 넘어갔어요", 3),
    ("내 정보가 파트너 기업에 공유된 걸 알게 됐어요", 3),
    ("계약 당시 고지되지 않은 곳에서 연락이 왔어요", 3),
    ("광고 대행사가 내 번호를 가지고 있더군요", 3),
    ("타업체의 이벤트에서 내 정보가 활용되었어요", 3),
    ("동의 안 했는데 보험사에서 전화가 옵니다", 3),
    ("기입한 정보가 제3자와 공유된 정황이 있어요", 3),
    ("고객센터가 아닌 다른 곳에서 내 정보를 언급했어요", 3),
    ("내 정보가 외부 컨설팅 업체에 넘어간 것 같습니다", 3),
    ("공공기관 제출 정보가 민간업체에 제공됐어요", 3),
    ("내 개인정보가 제3자에게 판매된 것 같아요", 3),
    ("서비스 이용 중 정보가 유출됐어요", 3),
    ("동의 없이 제 정보가 광고사에 넘어갔어요", 3),
    ("내 번호가 제3자에게 무단 제공됐어요", 3),
    ("제3자에게 개인정보가 공유된 사실을 몰랐어요", 3),
    ("고객정보가 협력사에 자동으로 넘어가요", 3),
    ("정보 제공 동의서가 없었어요", 3),
    ("제3자 제공에 대한 안내를 받은 적 없어요", 3),
    ("내 정보가 타사로 불법 전달됐어요", 3),
    ("내 정보가 광고 파트너에게 판매됐어요", 3),
    ("내 정보를 누구에게 넘겼는지 설명도 없었어요", 3),
    ("가입한 적 없는 업체에서 내 정보를 갖고 있어요", 3),
    ("다른 기업에서 갑자기 내 주소로 우편이 왔어요", 3),
    ("내 이름이 전혀 다른 서비스에 노출됐습니다", 3),
    ("개인정보 제공처가 명확하지 않아 불안해요", 3),
    ("내 정보가 전혀 모르는 서비스에 등록돼 있었어요", 3),
    ("제3자 제공 거절했는데 연락이 왔어요", 3),
    ("광고회사에서 내 개인정보로 연락을 했어요", 3),
    ("분명히 공유하지 않았는데 전화가 왔습니다", 3),
    ("내 정보가 다른 앱과 연동된 걸 뒤늦게 알았어요", 3),
    ("내 정보가 공유된 적 없는 쇼핑몰에서 택배 문자가 왔어요", 3),
    ("내 정보가 외국계 기업에 넘겨졌다고 들었어요", 3),
    ("정부 기관에 내 정보가 전달됐다는 안내를 못 받았어요", 3),
    ("거래처에 내 정보가 자동 전달된 것을 확인했어요", 3),
    ("고객센터와만 공유한 정보가 다른 부서에 넘어갔어요", 3),
    ("내 정보가 외부 포털에 공유된 정황이 있어요", 3),
    ("타 브랜드에서 내 정보를 사용하고 있어요", 3),
    ("내가 이용하지 않은 업체에서 나를 알고 있어요", 3),
    ("이메일을 알려준 적 없는데 연락이 왔습니다", 3),
    ("타 웹사이트에서 내 개인정보를 확인했어요", 3),
    ("내 전화번호가 제휴사 DB에 있었습니다", 3),
    ("내 정보가 외주업체에 전달됐다는 사실을 나중에 알았어요", 3),
    ("제 이름과 전화번호가 모르는 업체에 공유된 것 같아요", 3),
    ("가입하지 않은 쇼핑몰에서 택배 문자가 왔어요", 3),
    ("공공기관에 제출한 정보가 제3자에게 넘어갔습니다", 3),
    ("앱 연동만 했는데 타사에서 광고 연락이 왔어요", 3),
    ("내 개인정보가 해외 업체에 전달된 사실을 뒤늦게 확인했어요", 3),
    ("제 동의 없이 협력사 DB에 제 정보가 저장됐어요", 3),
    ("계약에 없던 제3자에게 제 정보가 넘어간 것 같아요", 3),
    ("내 번호가 이벤트 참여도 하지 않은 회사에 제공됐어요", 3),
    ("다른 서비스 가입에 필요한 정보가 자동으로 연동됐어요", 3),

# 4: CCTV 과잉촬영

    ("지하철 출입구에 CCTV가 너무 많아 사생활 침해가 우려됩니다", 4),
    ("공용 화장실 입구에 CCTV가 설치되어 있습니다", 4),
    ("헬스장 탈의실 근처에 CCTV가 있는 것 같아요", 4),
    ("회사 휴게실에 CCTV가 있어서 불편합니다", 4),
    ("학교 복도에 너무 많은 CCTV가 있어 감시받는 느낌이에요", 4),
    ("엘리베이터 내부까지 CCTV가 촬영하고 있습니다", 4),
    ("CCTV가 책상 바로 위에 있어 사생활이 침해돼요", 4),
    ("CCTV 안내 문구 없이 촬영되고 있었습니다", 4),
    ("아파트 주차장에 CCTV가 너무 가까이 설치돼 있어요", 4),
    ("회의실 내부에 CCTV가 작동 중이에요", 4),
    ("감시 목적 없이 설치된 CCTV가 너무 많아요", 4),
    ("어린이집 내부에 CCTV가 무분별하게 설치돼 있어요", 4),
    ("직원 휴게 공간에 CCTV가 몰래 설치되어 있었어요", 4),
    ("개인상담실에 CCTV가 있다는 사실을 몰랐어요", 4),
    ("카페 내부를 상시 촬영하는 CCTV가 불편해요", 4),
    ("시설 내 사전 고지 없이 설치된 CCTV가 있어요", 4),
    ("학생 자습 공간에 CCTV가 상시 작동 중입니다", 4),
    ("민감한 공간까지 CCTV가 촬영하고 있습니다", 4),
    ("상시 촬영 여부에 대한 고지가 없어요", 4),
    ("사무실 내 CCTV 영상이 너무 자주 확인됩니다", 4),
    ("공공장소에 설치된 CCTV가 과도해요", 4),
    ("CCTV가 사생활을 침해하는 수준이에요", 4),
    ("화장실 내부에 CCTV가 설치된 걸 발견했어요", 4),
    ("CCTV 촬영 범위가 너무 넓어요", 4),
    ("사전 안내 없이 CCTV가 설치되어 불안해요", 4),
    ("공원에 CCTV가 너무 많아 자유롭게 못 다녀요", 4),
    ("CCTV로 내 움직임이 계속 감시돼요", 4),
    ("CCTV 영상이 외부로 유출될까 걱정돼요", 4),
    ("민감한 공간까지 촬영하는 CCTV는 문제가 있어요", 4),
    ("CCTV가 개인정보보호법을 위반한 것 같아요", 4),
    ("화장실 앞 복도에 CCTV가 설치돼 있어요", 4),
    ("교실 안에 CCTV가 계속 저를 비추고 있어요", 4),
    ("도서관 열람실에 감시용 CCTV가 너무 많아요", 4),
    ("창문 너머로 보이는 CCTV가 사생활을 침해해요", 4),
    ("사무실에 앉으면 항상 CCTV 각도에 잡혀요", 4),
    ("탈의실 출입구에 CCTV가 있다는 사실을 몰랐어요", 4),
    ("쉬는 공간이 모두 촬영되고 있어 부담됩니다", 4),
    ("병원 대기실 CCTV가 제 얼굴을 클로즈업해요", 4),
    ("스터디카페 자리에 앉으면 바로 앞에 CCTV가 있어요", 4),
    ("상담실 천장에 CCTV가 있다는 게 뒤늦게 공지됐어요", 4),
    ("도서관 열람실 자리마다 CCTV가 달려 있어 불편합니다", 4),
    ("교실 내부에 CCTV가 설치돼 사생활 침해가 걱정돼요", 4),
    ("편의점 출입문에 지나치게 많은 CCTV가 있어요", 4),
    ("엘리베이터 안에 CCTV가 여러 대 설치돼 있어요", 4),
    ("사무실 책상 위에 CCTV가 고정돼 있어 부담돼요", 4),
    ("동선 전체가 CCTV로 녹화되고 있어요", 4),
    ("고지 없이 영상이 녹화되고 있었습니다", 4),
    ("샤워실 입구에 CCTV가 설치돼 있습니다", 4),
    ("회의실 문 위에 CCTV가 설치돼 있어요", 4),
    ("출퇴근 기록용 CCTV가 상시 작동 중이에요", 4),
    ("프라이버시가 보장되지 않는 위치에 CCTV가 있어요", 4),
    ("헬스장 러닝머신 앞에 CCTV가 바로 있어 불편해요", 4),
    ("교직원 휴게 공간에 CCTV가 몰래 설치돼 있었어요", 4),
    ("카페 내부에 CCTV가 너무 많아 불쾌했어요", 4),
    ("엘리베이터 앞 복도에 CCTV가 여러 대 설치돼 있어요", 4),
    ("공공 화장실 입구 CCTV가 얼굴을 클로즈업하고 있었어요", 4),
    ("사무실 개인 좌석 위에 CCTV가 설치돼 있었어요", 4),
    ("스터디카페 좌석 위에 CCTV가 바로 설치돼 있어 집중이 안 돼요", 4),
    ("회의실에 있는 CCTV가 녹화 중이라는 안내가 없었어요", 4),
    ("복도 CCTV가 교실 내부까지 비추고 있어요", 4),
    ("동의 없이 상담실 CCTV가 녹화 중이었습니다", 4),

# 5: 정보 유출

    ("회사 서버 해킹으로 고객 정보가 유출되었어요", 5),
    ("이메일 주소가 외부에 퍼졌습니다", 5),
    ("내 정보가 인터넷에 돌아다녀요", 5),
    ("이름과 전화번호가 검색됩니다", 5),
    ("SNS에 개인 정보가 유출됐습니다", 5),
    ("금융 정보가 유출되어 피해를 입었습니다", 5),
    ("주민등록번호가 유출된 것 같아요", 5),
    ("개인정보가 담긴 문서를 분실했어요", 5),
    ("기록이 외부에 노출된 걸 발견했어요", 5),
    ("이용 중이던 앱에서 정보가 유출됐어요", 5),
    ("개인 사진이 유출되었어요", 5),
    ("메일 주소가 해커에게 넘어간 것 같아요", 5),
    ("내 아이디가 외부에 노출됐습니다", 5),
    ("고객 정보가 유출됐다는 통지를 받았어요", 5),
    ("모르는 사람이 내 정보를 언급했어요", 5),
    ("회사 내부 실수로 정보가 누출됐어요", 5),
    ("사용자 로그가 외부에서 확인 가능했습니다", 5),
    ("내 정보가 검색사이트에 올라와 있어요", 5),
    ("기기에 저장된 정보가 유출된 듯해요", 5),
    ("정보 유출로 인한 금전적 피해를 입었습니다", 5),
    ("내 컴퓨터가 바이러스에 감염돼 정보가 유출됐어요", 5),
    ("내 개인정보가 해킹되어 팔리고 있어요", 5),
    ("누군가 내 비밀번호를 알아냈어요", 5),
    ("개인 정보가 무단 복제되고 있어요", 5),
    ("내 이메일이 스팸 발송에 악용됐어요", 5),
    ("회사에서 데이터 유출 사실을 숨기고 있어요", 5),
    ("내 이름과 주소가 온라인에 공개됐어요", 5),
    ("금융 정보가 외부로 유출되어 피해를 입었어요", 5),
    ("비밀번호가 도난당한 것 같아요", 5),
    ("내 신용정보가 해커에게 노출됐어요", 5),
    ("내 개인정보가 구글에 검색돼서 당황했어요", 5),
    ("제 주민번호 일부가 웹사이트에 노출돼 있었어요", 5),
    ("회사에서 내 전화번호가 담긴 문서를 분실했어요", 5),
    ("로그 파일에서 제 정보가 노출된 걸 확인했어요", 5),
    ("계약서가 외부에 유출돼 피해를 입었습니다", 5),
    ("내 신상정보가 카페 글에 포함돼 있었어요", 5),
    ("고객 정보가 포함된 엑셀 파일이 외부에 공유됐어요", 5),
    ("개인 메일로 타인의 정보가 전송돼 왔어요", 5),
    ("유출된 정보로 사기 전화를 받았어요", 5),
    ("의도하지 않게 내 정보가 다른 사람에게 전달됐어요", 5),
    ("제 명의로 개설된 계좌를 보고 정보 유출을 의심하고 있어요", 5),
    ("회사에서 메일 발송 실수로 제 정보가 노출됐습니다", 5),
    ("이름과 생년월일이 인터넷 검색에 노출돼 있어요", 5),
    ("정보 유출 사실을 통보받지 못했습니다", 5),
    ("내 휴대폰 번호가 유출된 것 같아요", 5),
    ("내 정보가 다크웹에 올라왔다는 말을 들었어요", 5),
    ("고객 정보가 저장된 노트북이 분실됐어요", 5),
    ("서버 오류로 타인의 정보가 보였어요", 5),
    ("내 정보가 유출됐다는 언론 보도를 봤습니다", 5),
    ("내 정보가 마케팅업체에 판매된 정황이 있어요", 5),
    ("앱에서 데이터 유출 사고가 발생했습니다", 5),
    ("병원에서 내 진료기록이 다른 환자에게 전달됐어요", 5),
    ("학교 내부 시스템 오류로 학생 정보가 유출됐습니다", 5),
    ("이메일 첨부 파일로 고객 정보가 유출됐어요", 5),
    ("웹사이트 보안 문제로 개인정보가 노출된 것 같아요", 5),
    ("내 계좌 정보가 해커에게 넘어간 듯해요", 5),
    ("동의 없이 주민등록번호가 외부에 퍼졌어요", 5),
    ("개인정보가 포함된 문서가 외부에 배포됐어요", 5),
    ("해커 공격으로 서비스 이용자 정보가 유출됐다고 합니다", 5),
    ("회사 내부에서 제 정보를 외부로 전송한 흔적이 있어요", 5),
    ("이름과 이메일이 포함된 목록이 외부에 유출됐습니다", 5),

# 6: 파기 미이행

    ("탈퇴했는데 개인정보가 아직도 남아 있어요", 6),
    ("계약 종료 후에도 정보가 삭제되지 않았어요", 6),
    ("보관 기한이 지났는데도 파기하지 않았어요", 6),
    ("정보 삭제 요청을 무시당했어요", 6),
    ("개인 정보가 여전히 시스템에 남아있어요", 6),
    ("이미 파기했어야 할 정보가 보관 중이에요", 6),
    ("회사에서 파기 의무를 지키지 않았어요", 6),
    ("동의 철회 후에도 정보가 유지됐어요", 6),
    ("고객 DB에서 삭제되지 않았어요", 6),
    ("개인 정보가 계속 활용되고 있어요", 6),
    ("내 기록이 서버에 남아 있었어요", 6),
    ("파기 요청했는데 답변이 없어요", 6),
    ("문서 파기 절차가 없다고 합니다", 6),
    ("파일 삭제가 제대로 되지 않았어요", 6),
    ("메일 탈퇴했는데 정보는 남아있어요", 6),
    ("계약 만료 후에도 DB에 남겨뒀어요", 6),
    ("파기했다고 했는데 확인해보니 있었어요", 6),
    ("사용자 데이터를 영구 보관하고 있어요", 6),
    ("이메일 삭제했는데 여전히 광고가 와요", 6),
    ("파일 백업본까지 지워달라고 했는데 남아있습니다", 6),
    ("내 정보가 파기되지 않아 불안해요", 6),
    ("개인정보 파기 요청이 반영되지 않았어요", 6),
    ("데이터 파기 증빙 자료를 요청했는데 안 줘요", 6),
    ("정보 파기 절차가 투명하지 않아요", 6),
    ("개인정보 보유 기간이 지나도 삭제하지 않아요", 6),
    ("파기 책임자가 명확하지 않아요", 6),
    ("파기 결과를 알 수가 없어요", 6),
    ("개인정보 파기 정책이 지켜지지 않습니다", 6),
    ("정보 삭제 후에도 복구 가능한 상태였어요", 6),
    ("정보 삭제 요청 후에도 마케팅 연락이 와요", 6),
    ("탈퇴한 사이트에서 계속 정보 활용 흔적이 보여요", 6),
    ("보관 기간이 지났는데도 파일이 남아 있었어요", 6),
    ("개인정보 삭제를 요청했지만 그대로였어요", 6),
    ("내 데이터가 백업본에 남아 있었다고 합니다", 6),
    ("정보 파기 확인서를 요구했는데 거절당했어요", 6),
    ("이전 사용자의 정보가 아직 서버에 남아 있어요", 6),
    ("내 요청에도 불구하고 정보는 여전히 존재합니다", 6),
    ("삭제 처리됐다고 했지만 기록은 남아 있었어요", 6),
    ("기술적 이유로 파기가 어렵다는 답변을 받았어요", 6),
    ("회원 탈퇴한 지 오래됐는데 로그인 기록이 여전히 남아 있어요", 6),
    ("탈퇴한 지 오래됐는데 여전히 문자 광고가 와요", 6),
    ("내 정보가 삭제되지 않고 그대로 보관 중입니다", 6),
    ("탈퇴한 계정 정보가 복구 가능했어요", 6),
    ("파기 기한이 지났는데도 아무 조치가 없어요", 6),
    ("탈퇴했지만 앱에서 로그인이 되더라고요", 6),
    ("내 정보가 사내 테스트에 사용되고 있어요", 6),
    ("정보 삭제 요청했지만 미확인 상태입니다", 6),
    ("개인정보가 담긴 백업이 외부에 남아 있어요", 6),
    ("지운다더니 여전히 시스템에 존재해요", 6),
    ("파기 완료 안내를 받지 못했어요", 6),
    ("회원 탈퇴한 지 1년이 지났는데 정보가 남아 있어요", 6),
    ("이전 회사에서 제 인사기록을 아직도 보관하고 있어요", 6),
    ("정보 삭제를 요청했는데 백업본에 그대로 남아 있었습니다", 6),
    ("데이터 삭제 완료 통보를 받지 못했어요", 6),
    ("내 정보가 여전히 내부 테스트에 사용되고 있었어요", 6),
    ("서비스 종료 이후에도 이메일이 수신되고 있어요", 6),
    ("파기 확인서를 요청했으나 제공받지 못했습니다", 6),
    ("광고 수신 거부했는데 기록은 남아 있어요", 6),
    ("개인정보 파기 요청 후 아무 조치가 없었어요", 6),
    ("서비스 탈퇴했는데 로그 기록이 유지되고 있었어요", 6),

# 7: 계정/비밀번호 관련 문제

    ("계정에 누군가 무단으로 로그인했습니다", 7),
    ("비밀번호가 자꾸 변경돼요", 7),
    ("내 계정이 해킹된 것 같아요", 7),
    ("로그인 기록에 이상한 접속이 있어요", 7),
    ("비밀번호 찾기가 제대로 작동하지 않아요", 7),
    ("이메일 인증이 안 돼서 계정에 접근할 수 없어요", 7),
    ("계정이 갑자기 잠겼어요", 7),
    ("비밀번호 재설정 메일이 오지 않아요", 7),
    ("계정 탈취 피해를 입었습니다", 7),
    ("두 단계 인증이 작동하지 않아요", 7),
    ("비밀번호 변경 시 알림이 안 와요", 7),
    ("내 계정 정보가 다른 사람에게 노출됐어요", 7),
    ("자동 로그인 기능이 위험한 것 같아요", 7),
    ("비밀번호를 잊어버렸는데 복구가 어려워요", 7),
    ("계정에 대한 접근 권한을 잃었어요", 7),
    ("로그인 오류가 계속 발생해요", 7),
    ("내 계정이 도용된 흔적이 보여요", 7),
    ("보안 질문이 너무 취약해요", 7),
    ("계정 복구 절차가 복잡해요", 7),
    ("계정이 정지됐는데 이유를 알 수 없어요", 7),
    ("비밀번호가 자동으로 변경되는 것 같아요", 7),
    ("로그인 시 보안 알림이 없어요", 7),
    ("계정 도용 피해 신고를 했어요", 7),
    ("계정 접근 기록을 확인하고 싶어요", 7),
    ("내 이메일로 로그인 알림이 계속 와요", 7),
    ("비밀번호가 자주 노출돼 걱정돼요", 7),
    ("계정 보안이 취약하다고 느껴집니다", 7),
    ("이중 인증이 제대로 작동하지 않아요", 7),
    ("비밀번호 재설정 링크가 만료됐어요", 7),
    ("계정 탈퇴 후에도 로그인할 수 있어요", 7),
    ("계정 접속 기록에 모르는 IP가 있어요", 7),
    ("계정 잠금 해제를 요청했지만 해결되지 않았어요", 7),
    ("로그인을 시도하지 않았는데 인증 문자가 왔어요", 7),
    ("비밀번호 변경 후에도 계속 로그인 오류가 나요", 7),
    ("내 계정에 누가 접근한 흔적이 보여요", 7),
    ("계정 복구를 위한 이메일이 도착하지 않아요", 7),
    ("타인이 내 계정을 이용한 정황이 있어요", 7),
    ("비밀번호 유출로 인한 피해를 입었습니다", 7),
    ("이메일 주소만으로 계정 정보가 노출돼요", 7),
    ("로그아웃해도 계정에 자동으로 접근이 됩니다", 7),
    ("비밀번호를 바꿨는데도 누군가 계속 로그인 시도를 해요", 7),
    ("계정이 자동으로 로그아웃됩니다", 7),
    ("비밀번호 재설정 링크가 유효하지 않아요", 7),
    ("이메일 인증 후에도 로그인할 수 없어요", 7),
    ("계정 탈취로 피해를 입었어요", 7),
    ("비밀번호가 외부에 노출된 것 같아요", 7),
    ("계정 잠금 해제가 어렵습니다", 7),
    ("로그인 요청 기록이 없는데 접속이 있었어요", 7),
    ("비밀번호 변경 이력이 없어졌습니다", 7),
    ("이메일 주소가 다른 사용자와 중복됐어요", 7),
    ("로그인 시도 알림을 받지 못했어요", 7),
    ("비밀번호를 바꿔도 계속 로그인 시도가 발생해요", 7),
    ("계정 접속 이력이 사라졌습니다", 7),
    ("계정 복구 메일이 도착하지 않아요", 7),
    ("타인이 내 계정을 사용하고 있었어요", 7),
    ("로그인 시도 알림이 오지 않아서 불안해요", 7),
    ("이메일 주소가 다른 사람과 중복돼 혼란이 있었어요", 7),
    ("비밀번호 변경 이력이 기록되지 않았습니다", 7),
    ("인증 절차가 너무 느려서 계정 접근이 어렵습니다", 7),
    ("계정이 잠금 상태인데 아무 알림이 없었어요", 7),
    ("자동 로그인이 해제되지 않아 걱정이에요", 7),

    # 8: 개인정보 열람·정정 요구 거부

    ("내 정보가 틀렸는데 고쳐달라는 요청이 반려됐어요", 8),
    ("정보 열람을 신청했지만 아무 답변이 없어요", 8),
    ("정보 정정 요청을 했지만 거부당했어요", 8),
    ("수정 요청을 했지만 처리가 되지 않았습니다", 8),
    ("내 정보에 접근할 권한이 없다고 했어요", 8),
    ("정정 요구를 했지만 연락이 오지 않았어요", 8),
    ("정보 열람 요청을 했는데 거부당했어요", 8),
    ("내 개인정보를 수정해 달라고 했는데 안 해줘요", 8),
    ("열람 권한이 없다고 합니다", 8),
    ("개인정보 정정 요청이 반려됐어요", 8),
    ("정보 열람 시 개인정보 일부가 숨겨져 있어요", 8),
    ("수정 요청 후 아무 답변이 없어요", 8),
    ("개인정보 확인을 거부당했습니다", 8),
    ("정당한 열람 요청을 무시하고 있어요", 8),
    ("정보가 정확하지 않는데도 안 고쳐줘요", 8),
    ("열람 거부 이유가 명확하지 않아요", 8),
    ("개인정보를 확인할 수 있는 방법이 없어요", 8),
    ("정보 정정을 위한 절차가 너무 복잡해요", 8),
    ("수정 요청이 처리되지 않고 있습니다", 8),
    ("개인정보 보호 책임자가 연락을 받지 않아요", 8),
    ("내 요청이 계속 지연되고 있어요", 8),
    ("열람 요청 권리가 제대로 보장되지 않아요", 8),
    ("정보가 틀렸는데도 수정해주지 않아요", 8),
    ("정정 요구가 부당하게 거부됐어요", 8),
    ("정보 열람 기록이 남지 않아요", 8),
    ("개인정보 정정 요청서가 반려됐습니다", 8),
    ("내 권리가 침해되고 있다고 느껴요", 8),
    ("수정 요청서 접수 후 확인이 안 돼요", 8),
    ("정보 열람 절차가 불투명합니다", 8),
    ("개인정보 수정이 너무 늦게 처리돼요", 8),
    ("열람 및 정정 권한 행사가 어렵습니다", 8),
    ("정보 열람 관련 문의에 답이 없어요", 8),
    ("내 요청이 제대로 반영되지 않았어요", 8),
    ("개인정보 정정 권한이 제한돼 있어요", 8),
    ("열람 요구에 불응하고 있습니다", 8),
    ("내 데이터가 잘못 관리되고 있어요", 8),
    ("내 정보가 잘못됐는데 수정이 불가능하다고 합니다", 8),
    ("열람 요청서를 냈는데 처리 기간이 너무 길어요", 8),
    ("수정을 요청했지만 시스템상 불가능하다고 합니다", 8),
    ("정정 요청을 계속 무시당하고 있어요", 8),
    ("내 정보 접근 권한이 차단돼 있어요", 8),
    ("정정 요청 접수 후 아무 연락도 없습니다", 8),
    ("정보 오류에 대한 책임을 회피하고 있어요", 8),
    ("내 정보가 틀린데 수정이 안 된다고 합니다", 8),
    ("개인정보 열람을 위한 절차가 너무 까다로워요", 8),
    ("정정 요청에 대한 회신조차 없어요", 8),
    ("내 정보가 잘못 등록됐다고 알려줬지만 수정을 거절당했어요", 8),
    ("내 정보 확인 요청을 수차례 무시당했습니다", 8),
    ("잘못된 정보를 바로잡을 수 없게 돼 있어요", 8),
    ("정보 확인을 하려 했지만 방법이 없었어요", 8),
    ("열람 신청서를 제출했는데 반려됐습니다", 8),
    ("정정 요청에 대해 아무 피드백이 없어요", 8),
    ("개인정보 담당자가 연락을 받지 않아요", 8),
    ("수정 절차가 지나치게 번거로워요", 8),
    ("내가 등록한 정보인데 접근 권한이 없어요", 8),
    ("요청서가 처리되지 않고 반려됐습니다", 8),
    ("정보 정정에 대한 회신이 없습니다", 8),
    ("정보 열람 요청서를 냈는데 접수가 안 됐습니다", 8),
    ("내 정보 정정 요청을 무시당했어요", 8),
    ("틀린 정보를 바로잡으려 했는데 거절당했습니다", 8),
    ("정정 요청을 했지만 시스템에서 반영되지 않았어요", 8),
    ("내 정보가 정확하지 않은데도 수정이 불가능하대요", 8),
    ("정보 열람을 요청했지만 회신이 없어요", 8),
    ("정정 요청 접수 후 처리 기간이 지나도 응답이 없어요", 8),
    ("내 정보 접근 권한이 계속 차단돼 있습니다", 8),
    ("잘못된 정보로 인해 피해를 봤지만 수정해주지 않았어요", 8),
    ("정정 요청을 여러 번 했지만 회신도 없고 반영도 안 됐어요", 8),
    ("개인정보 열람 절차가 너무 복잡해서 불가능했어요", 8),
    ("내 정보 오류에 대해 책임지지 않겠다고 했어요", 8),
    ("정정 요청서를 제출했지만 처리되지 않았어요", 8),
    ("열람 요청이 처리 지연된다는 답변만 반복됐어요", 8),

    ("홈페이지에 제 사진이 동의 없이 올라갔어요", 0),
    ("유튜브 영상 썸네일에 제 얼굴이 동의 없이 나왔어요", 0),
    ("친구가 제 얼굴을 몰래 찍었어요", 0),
    ("인터넷 기사에 제 얼굴이 모자이크 없이 실렸어요", 0),
    ("학교에서 얼굴이 나온 사진을 안내장에 사용했어요", 0),
    ("뉴스 방송에 지나가던 제가 실시간으로 얼굴이 노출됐어요", 0),
    ("모르는 사람이 제 사진을 프로필 사진으로 쓰고있어요", 0),
    ("이벤트에 참가했는데 제 얼굴을 클로즈업 해서 sns에 올라갔어요", 0),
    ("회사 포스터에 제 사진이 들어갔는데 사전 설명이 없었어요", 0),
    ("모델이 장신구 홍보를 위해 사진 촬영에 동의했지만, 동의하지 않은 방식으로 무기한 게시했어요", 0),

    ("동아리 가입 신청서에 부모님의 소득까지 쓰려고 했어요", 1),
    ("앱을 설치하자마자 사진첩에 접근하려고 했어요", 1),
    ("택배 시켰더니 판매자가 전화번호를 무단으로 수집했어요", 1),
    ("qr코드 체크인하면서 입력한 정보가 어디에 쓰이는지 안내가 없어요", 1),
    ("사이트에 가입도 안 했는데 이미 이름과 전화번호가 저장돼 있었어요", 1),
    ("문자이벤트에 응모했는데 주소와 생년월일까지 필수입력이래요", 1),
    ("사내 설문조사였는데 직원 개인의 사생활 정보까지 물어봤어요", 1),
    ("비대면 진료를 받았는데 별도로 고지 없이 건강정보가 수집됐어요", 1),
    ("학원에서 방역 목적으로 체온·기저질환 등 민감정보를 수집했어요", 1),
    ("온라인 쇼핑몰이 회원가입 시 주민등록번호를 필수 항목으로 수집했어요", 1),

    ("온라인 강의 수강했더니 이후 관련 홍보문자가 계속 와요", 2),
    ("이벤트 신청만 했는데 제 정보로 마케팅 메시지가 왔어요", 2),
    ("상담 신청했더니 다른 제품 추천 광고가 왔습니다", 2),
    ("단순 참여였는데 개인정보가 다른 목적에 쓰인 것 같아요", 2),
    ("의료 상담 받았더니 보험상품 광고가 왔어요", 2),
    ("앱 이용 중 내 정보가 광고 분석에 활용된 것 같아요", 2),
    ("프로필 정보가 타 부서 마케팅 자료로 활용됐습니다", 2),
    ("상품 문의했더니 제 정보로 타사에서 연락이 왔어요", 2),
    ("내가 남긴 후기가 타사의 광고 이미지에 쓰였어요", 2),
    ("이용약관엔 없던 방식으로 제 정보가 활용됐어요", 2),

    ("쇼핑몰에 가입했는데 다른 제휴사에서 제 번호로 문자가 왔어요", 3),
    ("문의했던 병원이 아닌 보험사에서 연락이 왔어요", 3),
    ("가입한 적 없는 업체에서 내 정보를 알고 있었어요", 3),
    ("타사에서 갑자기 내 이메일로 메일을 보냈어요", 3),
    ("내 정보가 외국 업체 DB에도 저장돼 있다고 들었어요", 3),
    ("내 번호가 광고 회사에 전달돼 사용된 것 같아요", 3),
    ("정보 제공 거부했는데 제3자에게 공유됐어요", 3),
    ("이벤트 참여했더니 전혀 다른 업체에서 연락이 왔습니다", 3),
    ("내 정보가 외부 컨설팅 업체와 공유된 정황이 있어요", 3),
    ("서비스 신청만 했는데 다른 회사에서 광고 메일이 왔어요", 3),

    ("기숙사 복도 안에 CCTV가 설치되어 있어서 불편했어요", 4),
    ("카페 테이블 위에 CCTV가 달려 있었어요", 4),
    ("스터디룸 천장에 CCTV가 있어 눈치 보였어요", 4),
    ("헬스장 샤워실 앞 CCTV 위치가 너무 민감했어요", 4),
    ("학교 상담실 안에 CCTV가 작동 중이었어요", 4),
    ("탈의실 근처 CCTV 위치가 부적절하다고 느꼈어요", 4),
    ("엘리베이터 내 CCTV가 얼굴을 너무 가까이 비춰요", 4),
    ("사무실 책상 바로 위에 CCTV가 설치돼 불편해요", 4),
    ("독서실 자리마다 CCTV가 달려 있어 감시받는 느낌이에요", 4),
    ("CCTV 고지 없이 영상이 저장되고 있는 것 같아요", 4),
    
    ("이메일 주소가 유출돼 스팸이 많이 옵니다", 5),
    ("내 정보가 해킹돼서 금융 피해를 입었어요", 5),
    ("회사에서 개인정보 유출 사고가 발생했어요", 5),
    ("알 수 없는 경로로 내 정보가 퍼졌어요", 5),
    ("이름과 주민번호 일부가 공개된 적이 있어요", 5),
    ("계약서가 외부로 유출된 정황이 있습니다", 5),
    ("해킹으로 제 정보가 다크웹에 올라갔다는 얘기를 들었어요", 5),
    ("회사에서 고객정보가 담긴 파일을 분실했어요", 5),
    ("앱 이용 중 개인정보가 외부로 유출됐다는 공지를 받았어요", 5),
    ("타인에게 내 개인 파일이 전송됐어요", 5),

     # 6: 파기 미이행
    ("회원 탈퇴했는데도 아직 문자 광고가 오고 있어요", 6),
    ("정보 삭제 요청했는데 아무 조치가 없어요", 6),
    ("파기 완료 안내를 받지 못해 불안해요", 6),
    ("계약 만료 후에도 정보가 남아 있었어요", 6),
    ("파기 요청했지만 백업 서버에 그대로 있었어요", 6),
    ("개인정보가 영구 보관되고 있다는 말을 들었어요", 6),
    ("회원 탈퇴한 후에도 로그인이 가능했어요", 6),
    ("내 정보 삭제가 제대로 이뤄졌는지 확인할 수 없어요", 6),
    ("탈퇴한 계정이 여전히 내부에서 사용되고 있어요", 6),
    ("파기되었다고 했지만 정보가 유출된 적이 있어요", 6),

    # 7: 계정/비밀번호 관련 문제
    ("비밀번호를 바꿨는데 누군가 계속 로그인 시도 중이에요", 7),
    ("내 계정 접속 기록에 낯선 IP가 있어요", 7),
    ("비밀번호 재설정 이메일이 도착하지 않아요", 7),
    ("계정이 갑자기 잠겨서 접근이 안 돼요", 7),
    ("이메일 인증이 실패해서 로그인할 수 없어요", 7),
    ("로그아웃했는데도 계정에 다시 접근이 가능해요", 7),
    ("비밀번호를 입력하지 않았는데 로그인됐어요", 7),
    ("계정 탈퇴 요청했는데 그대로 유지돼 있어요", 7),
    ("이중 인증 설정했는데 작동하지 않아요", 7),
    ("비밀번호가 자꾸 초기화됩니다", 7),
    
]

df = pd.DataFrame(data, columns=["text", "label"])

train_texts, val_texts, train_labels, val_labels = train_test_split(
    df['text'].tolist(), df['label'].tolist(), test_size=0.2, random_state=42
)

# 2. 데이터셋 클래스 정의
class LegalDataset(Dataset):
    def __init__(self, texts, labels, tokenizer, max_len=64):
        self.texts = texts
        self.labels = labels
        self.tokenizer = tokenizer
        self.max_len = max_len

    def __len__(self):
        return len(self.texts)

    def __getitem__(self, idx):
        text = self.texts[idx]
        label = self.labels[idx]
        encoding = self.tokenizer(
            text,
            max_length=self.max_len,
            padding='max_length',
            truncation=True,
            return_tensors='pt'
        )
        return {
            'input_ids': encoding['input_ids'].squeeze(),
            'attention_mask': encoding['attention_mask'].squeeze(),
            'labels': torch.tensor(label)
        }

# 3. 모델과 토크나이저 로딩
model_name = "klue/bert-base"
tokenizer = BertTokenizer.from_pretrained(model_name)
model = BertForSequenceClassification.from_pretrained(model_name, num_labels=9)

device = torch.device("cuda" if torch.cuda.is_available() else "cpu")
model.to(device)

# 4. 데이터셋 준비
train_dataset = LegalDataset(train_texts, train_labels, tokenizer)
val_dataset = LegalDataset(val_texts, val_labels, tokenizer)

# 5. 평가 지표 설정
accuracy_metric = load_metric("accuracy")
def compute_metrics(eval_pred):
    logits, labels = eval_pred
    preds = np.argmax(logits, axis=-1)
    return accuracy_metric.compute(predictions=preds, references=labels)

from transformers import TrainerCallback

class DelayedEarlyStoppingCallback(TrainerCallback):
    def __init__(self, patience=5, start_epoch=10):
        self.patience = patience
        self.start_epoch = start_epoch
        self.last_loss = None
        self.epochs_no_improve = 0

    def on_evaluate(self, args, state, control, metrics=None, **kwargs):
        if metrics is None or "eval_loss" not in metrics:
            return control

        current_epoch = int(state.epoch)
        current_loss = metrics["eval_loss"]

        if current_epoch < self.start_epoch:
            self.last_loss = current_loss  # 기록만 해둠
            return control

        if self.last_loss is None or current_loss < self.last_loss:
            self.epochs_no_improve = 0
        else:
            self.epochs_no_improve += 1
            print(f"{current_epoch}에서 val_loss 개선되지 않음 ({self.epochs_no_improve}/{self.patience})")
            if self.epochs_no_improve >= self.patience:
                print(f"조기 종료 발생: val_loss가 {self.patience}회 연속 악화됨")
                control.should_training_stop = True

        self.last_loss = current_loss  # 이전 loss 업데이트
        return control


# 6. 훈련 설정
training_args = TrainingArguments(
    output_dir='./klue_bert_results',
    num_train_epochs=30,
    per_device_train_batch_size=4,
    per_device_eval_batch_size=4,
    logging_steps=5,
    eval_strategy="epoch",
    save_strategy="epoch",
    load_best_model_at_end=True,
    metric_for_best_model="eval_loss",
    report_to="none"
)

trainer = Trainer(
    model=model,
    args=training_args,
    train_dataset=train_dataset,
    eval_dataset=val_dataset,
    compute_metrics=compute_metrics,
    callbacks=[DelayedEarlyStoppingCallback(patience=5, start_epoch=10)]
)

# 7. 학습 시작
trainer.train()

# 8. 혼동 행렬 및 평가 리포트 출력 (device 반영)
model.eval()
all_preds, all_labels = [], []
for batch in val_dataset:
    inputs = {
        'input_ids': batch['input_ids'].unsqueeze(0).to(device),
        'attention_mask': batch['attention_mask'].unsqueeze(0).to(device)
    }
    labels = batch['labels'].item()
    with torch.no_grad():
        outputs = model(**inputs)
    pred = torch.argmax(outputs.logits, dim=1).item()
    all_preds.append(pred)
    all_labels.append(labels)

print("\n[Confusion Matrix]")
print(confusion_matrix(all_labels, all_preds))

print("\n[Classification Report]")
print(classification_report(
    all_labels,
    all_preds,
    labels=list(label_map.keys()),
    target_names=[label_map[i] for i in range(len(label_map))]
))

# 9. 모델 저장 (기존과 동일)
model.save_pretrained("./saved_klue_bert")
tokenizer.save_pretrained("./saved_klue_bert")

# 10. 추론 함수 (device 반영)
def classify_legal_issue(text):
    model.eval()
    inputs = tokenizer(text, return_tensors="pt", truncation=True, padding=True, max_length=64)
    inputs = {k: v.to(device) for k, v in inputs.items()}
    with torch.no_grad():
        outputs = model(**inputs)
    pred = torch.argmax(outputs.logits, dim=1).item()
    return label_map[pred]

# 11. 테스트 예시
example = "앱을 설치했더니 동의 없이 위치정보를 수집했어요"
print(f"\n입력: {example}\n예측된 유형: {classify_legal_issue(example)}")